import { DatabaseEntity } from '../types/blueprint';

export const databaseEntities: DatabaseEntity[] = [
  {
    id: 'users',
    name: 'Users',
    description: 'Stores all registered user accounts and their profile information.',
    fields: [
      { name: 'id', type: 'UUID', description: 'Unique user identifier' },
      { name: 'phone', type: 'VARCHAR(20)', description: 'Phone number used for login (unique)' },
      { name: 'name', type: 'VARCHAR(100)', description: 'Display name shown on profile' },
      { name: 'location', type: 'VARCHAR(100)', description: 'User\'s region/city in The Gambia' },
      { name: 'verified_badge', type: 'BOOLEAN', description: 'True if seller has been ID-verified' },
      { name: 'rating', type: 'DECIMAL(3,2)', description: 'Average star rating from reviews' },
      { name: 'profile_photo', type: 'TEXT', description: 'URL to profile photo in cloud storage' },
      { name: 'created_at', type: 'TIMESTAMP', description: 'Account creation timestamp' },
    ],
    relationships: ['Has many Listings', 'Has many Reviews (as reviewer and reviewee)', 'Has many Messages'],
  },
  {
    id: 'listings',
    name: 'Listings',
    description: 'All product and service listings posted by sellers.',
    fields: [
      { name: 'id', type: 'UUID', description: 'Unique listing identifier' },
      { name: 'seller_id', type: 'UUID (FK)', description: 'References Users.id — the seller' },
      { name: 'title', type: 'VARCHAR(200)', description: 'Short listing title' },
      { name: 'description', type: 'TEXT', description: 'Full item description' },
      { name: 'category', type: 'ENUM', description: 'phones, clothes, food, electronics, services, rentals' },
      { name: 'price', type: 'DECIMAL(10,2)', description: 'Price in Gambian Dalasi (GMD)' },
      { name: 'condition', type: 'ENUM', description: 'new, used, refurbished' },
      { name: 'photos', type: 'TEXT[]', description: 'Array of photo URLs (max 5)' },
      { name: 'location', type: 'VARCHAR(100)', description: 'Region/city where item is located' },
      { name: 'status', type: 'ENUM', description: 'active, sold, expired, removed' },
      { name: 'is_boosted', type: 'BOOLEAN', description: 'True if seller paid for promoted placement' },
      { name: 'created_at', type: 'TIMESTAMP', description: 'Listing creation timestamp' },
    ],
    relationships: ['Belongs to Users (seller_id)', 'Has many Messages', 'Has many Transactions', 'Has many Reviews'],
  },
  {
    id: 'messages',
    name: 'Messages',
    description: 'In-app chat messages exchanged between buyers and sellers.',
    fields: [
      { name: 'id', type: 'UUID', description: 'Unique message identifier' },
      { name: 'listing_id', type: 'UUID (FK)', description: 'References Listings.id — context listing' },
      { name: 'sender_id', type: 'UUID (FK)', description: 'References Users.id — message sender' },
      { name: 'receiver_id', type: 'UUID (FK)', description: 'References Users.id — message recipient' },
      { name: 'content', type: 'TEXT', description: 'Message text or image URL' },
      { name: 'is_read', type: 'BOOLEAN', description: 'Whether recipient has read the message' },
      { name: 'timestamp', type: 'TIMESTAMP', description: 'When the message was sent' },
    ],
    relationships: ['Belongs to Listings (listing_id)', 'Belongs to Users (sender_id, receiver_id)'],
  },
  {
    id: 'transactions',
    name: 'Transactions',
    description: 'Records of completed or pending payment transactions.',
    fields: [
      { name: 'id', type: 'UUID', description: 'Unique transaction identifier' },
      { name: 'listing_id', type: 'UUID (FK)', description: 'References Listings.id — item sold' },
      { name: 'buyer_id', type: 'UUID (FK)', description: 'References Users.id — the buyer' },
      { name: 'seller_id', type: 'UUID (FK)', description: 'References Users.id — the seller' },
      { name: 'payment_method', type: 'ENUM', description: 'afrimoney, qmoney, cash' },
      { name: 'amount', type: 'DECIMAL(10,2)', description: 'Transaction amount in GMD' },
      { name: 'status', type: 'ENUM', description: 'pending, completed, disputed, refunded' },
      { name: 'created_at', type: 'TIMESTAMP', description: 'Transaction initiation timestamp' },
    ],
    relationships: ['Belongs to Listings (listing_id)', 'Belongs to Users (buyer_id, seller_id)'],
  },
  {
    id: 'reviews',
    name: 'Reviews',
    description: 'Star ratings and written reviews left after completed transactions.',
    fields: [
      { name: 'id', type: 'UUID', description: 'Unique review identifier' },
      { name: 'reviewer_id', type: 'UUID (FK)', description: 'References Users.id — who wrote the review' },
      { name: 'reviewee_id', type: 'UUID (FK)', description: 'References Users.id — who is being reviewed' },
      { name: 'listing_id', type: 'UUID (FK)', description: 'References Listings.id — related listing' },
      { name: 'stars', type: 'SMALLINT', description: 'Rating from 1 to 5 stars' },
      { name: 'comment', type: 'TEXT', description: 'Optional written review text' },
      { name: 'created_at', type: 'TIMESTAMP', description: 'Review submission timestamp' },
    ],
    relationships: ['Belongs to Users (reviewer_id, reviewee_id)', 'Belongs to Listings (listing_id)'],
  },
  {
    id: 'reports',
    name: 'Reports',
    description: 'User-submitted reports for suspicious listings or problematic users.',
    fields: [
      { name: 'id', type: 'UUID', description: 'Unique report identifier' },
      { name: 'reporter_id', type: 'UUID (FK)', description: 'References Users.id — who filed the report' },
      { name: 'reported_id', type: 'UUID (FK)', description: 'References Users.id — reported user' },
      { name: 'listing_id', type: 'UUID (FK)', description: 'References Listings.id — reported listing (optional)' },
      { name: 'reason', type: 'ENUM', description: 'scam, fake_item, harassment, spam, other' },
      { name: 'description', type: 'TEXT', description: 'Additional details from reporter' },
      { name: 'status', type: 'ENUM', description: 'pending, reviewed, resolved, dismissed' },
      { name: 'created_at', type: 'TIMESTAMP', description: 'Report submission timestamp' },
    ],
    relationships: ['Belongs to Users (reporter_id, reported_id)', 'Optionally belongs to Listings (listing_id)'],
  },
];
